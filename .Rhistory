#你的程式答案
rm(list=ls())
library(dplyr)
library(psych)
library(haven)
wage1 <- read_dta("http://fmwww.bc.edu/ec-p/data/wooldridge/wage1.dta")
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
wage1 %>% lm(lwage~educ,data=.)
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
wage1 %>%
lm(lwage~educ+exper+profocc,data=.)
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
summarise(low,mean(wage))
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
summarise(med,mean(wage))
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(high,mean(wage))
View(wage1)
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(low,med,high,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(low+med+high,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
select_all(low,med,high) %>%
mean(wage) %>%
table()
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
summarise(low,mean(wage))
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
summarise(med,mean(wage))
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(high,mean(wage))
low ->
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(low) %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(,low) %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(low) %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
summarise(low,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
summarise(low,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
View(high)
dplyr::filter(wage1,cut(12,16),lable="low","med","high")
dplyr::filter(wage1,cut(12,16),lable=="low","med","high")
dplyr::filter(wage1,cut(12,16),lables="low","med","high")
dplyr::filter(wage1,cut(12,16),lables=(low,"med","high"))
dplyr::filter(wage1,cut(12,16),lables=("low","med","high"))
dplyr::filter(wage1,cut(12,16))
wage1$wage %>%
cut(12,16)
wage1$wage %>%
cut(12:16)
aaa <- c(1,2,3,4,5,2,3,4,5,6,7)
cut(aaa, 3)
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,wage) %>%
pairs.panels()
```{r}
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(educ,lwage) %>%
pairs.panels()
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
$$log(wage)=\beta_0+\beta_1 educ+\epsilon$$
$$log(wage)=\beta_0+\beta_1 educ+\epsilon$$
log(wage)=\beta_0+\beta_1 educ+\epsilon$
log(wage)=\beta_0+\beta_1 educ+\epsilon
$log(wage)=\beta_0+\beta_1 educ+\epsilon$
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
library(dplyr)
library(magrittr)
library(AER)
labordata %<>% dplyr::filter(YEAR == 7)
plot(labordata$WKS,labordata$LWAGE)
labordata %>%
group_by(UNION) %>%
summarise(mean_lwage=mean(LWAGE),mean_wks=mean(WKS))
model1 <- WKS ~ LWAGE
model2 <- WKS ~ LWAGE + ED + UNION + FEM
ols1 <- lm(model1,labordata)
ols2 <- lm(model2,labordata)
stargazer(ols1,ols2,type="html")
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
library(dplyr)
library(magrittr)
library(AER)
library(stargazer)
labordata %<>% dplyr::filter(YEAR == 7)
plot(labordata$WKS,labordata$LWAGE)
labordata %>%
group_by(UNION) %>%
summarise(mean_lwage=mean(LWAGE),mean_wks=mean(WKS))
model1 <- WKS ~ LWAGE
model2 <- WKS ~ LWAGE + ED + UNION + FEM
ols1 <- lm(model1,labordata)
ols2 <- lm(model2,labordata)
stargazer(ols1,ols2,type="html")
ttsls_1iv <- ivreg(
WKS ~ LWAGE  | IND,
data=labordata
)
summary(tsls_1iv, vcov = sandwich, diagnostics = TRUE, df=Inf) -> tsls_1iv_tests
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
library(dplyr)
library(magrittr)
library(AER)
library(stargazer)
labordata %<>% dplyr::filter(YEAR == 7)
plot(labordata$WKS,labordata$LWAGE)
labordata %>%
group_by(UNION) %>%
summarise(mean_lwage=mean(LWAGE),mean_wks=mean(WKS))
model1 <- WKS ~ LWAGE
model2 <- WKS ~ LWAGE + ED + UNION + FEM
ols1 <- lm(model1,labordata)
ols2 <- lm(model2,labordata)
stargazer(ols1,ols2,type="html")
tsls_1iv <- ivreg(
WKS ~ LWAGE  | IND,
data=labordata
)
summary(tsls_1iv, vcov = sandwich, diagnostics = TRUE, df=Inf) -> tsls_1iv_tests
tsls_1iv_tests
tsls_2iv <- ivreg(
WKS ~ LWAGE  | IND + SMSA,
data=labordata
)
summary(tsls_2iv, vcov = sandwich, diagnostics = TRUE, df=Inf) -> tsls_2iv_tests
tsls_2iv_tests
stargazer(ols1,ols2,tsls_1iv,tsls_2iv,type="html",
column.labels = c("ols1","ols2","one IV", "two IVs"),
add.lines = list(c("TSLS tests p-value","","","",""),
c("Q1: Sargan","","","NA","0.638"),
c("Q2: Weak instruments","NA","NA","0.115","3.63e-09"),
c("Q3: Wu-Hausman","NA","NA","0.682","0.870")
))
q()
